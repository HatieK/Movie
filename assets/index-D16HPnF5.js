import{j as e,a as ee,r as v}from"./react-CG4nFigO.js";import{c as ls}from"./react-dom-DfW9SiQH.js";import{c as se,a as os}from"./@reduxjs-DYdxbMDp.js";import{u as ae,C as S}from"./react-hook-form-DToDPZdA.js";import{c as ne,a as D,b as cs}from"./yup-CYEadY7Z.js";import{o as ie}from"./@hookform-DAHQZf_6.js";import{u as q,a as O,b as he,Q as hs,c as ds}from"./@tanstack-lNxXP64o.js";import{a as ms}from"./axios-B4uVmeYG.js";import{u as E,a as z,P as us}from"./react-redux-Ck5w0_8O.js";import{a as B,b as Ie,d as Ke,e as de,f as xs,O as ve}from"./react-router-Ct6yV6dC.js";import{C as gs,a as g,R as A,s as R,F as te,I as H,B as I,M as me,D as Re,S as Ge,t as ps,L as De,b as js,c as Ns,H as fs,d as vs,T as ye,e as Ne,f as ys,g as bs,U as Ts,h as Ae,i as Te,P as Ee,j as ws,k as _,l as Fe,m as Y,n as Cs,E as Ss,o as Ls,p as Ps}from"./antd-DM1d2pX-.js";import{q as Ue,a4 as ks,a5 as Ms,a6 as Ds,a7 as Hs,a8 as Is,a9 as Ks,$ as Rs,x as Gs,aa as As,B as Es}from"./@ant-design-UreK5S7d.js";import{d as U,c as Fs,a as Us,w as qs,l as Vs,b as $s,e as Os}from"./dayjs-DXM8Qjtm.js";import{f as zs}from"./date-fns-D0ZMcLTU.js";import{L as M,B as _s}from"./react-router-dom-D_j5HTLU.js";import{h as Qs,m as Ys}from"./moment-DkqRl2iO.js";import{S as Bs,P as Xs,N as Js,a as Zs}from"./swiper-CT_O11zM.js";import"./classnames-BK5ccKcQ.js";import"./scheduler-CzFDRTuY.js";import"./redux-DITMfSWq.js";import"./immer-AZmEbvJU.js";import"./reselect-DyB87yl0.js";import"./redux-thunk-ClJT1hhx.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-OwY6VClS.js";import"./use-sync-external-store-CT3tdUSc.js";import"./@remix-run-YI_hLLil.js";import"./rc-util-DVFD5dlp.js";import"./@babel-BqpdSp3b.js";import"./rc-resize-observer-DD0qS7na.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-CCmj61Nm.js";import"./rc-overflow-De_9ECWx.js";import"./rc-picker-Bg6WMipV.js";import"./@rc-component-Y3WVOzwK.js";import"./rc-tabs-CPxm7sq5.js";import"./rc-dropdown-Dw99Qy55.js";import"./rc-menu-PrKvnl0m.js";import"./rc-select-CyIWHl6d.js";import"./rc-virtual-list-D-jFHIFP.js";import"./@ctrl-DOFZgDuz.js";import"./rc-field-form-BPYxJVy1.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-dialog-DUBL5GO5.js";import"./rc-notification-Du29ztaA.js";import"./rc-tooltip-DJ1GfMKq.js";import"./rc-rate-BU8LDOP5.js";import"./rc-table-yxcKKbWN.js";import"./rc-tree-BkxafXBd.js";import"./rc-checkbox-DlorzPKv.js";import"./rc-pagination-BsSHwLlg.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-textarea-DWB4pp9c.js";import"./rc-input-D3RZipVX.js";import"./copy-to-clipboard-iuHVwNMD.js";import"./toggle-selection-BHUZwh74.js";import"./rc-upload-MBZ_Yy3D.js";import"./rc-progress-D9hxEyjj.js";import"./@emotion-CW87jbl0.js";import"./stylis-DsJDcYJc.js";import"./json2mq-CXv72UMQ.js";import"./string-convert-DdSrkZLz.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(o){if(o.ep)return;o.ep=!0;const d=t(o);fetch(o.href,d)}})();const Ws=({bannerList:a})=>e.jsx("div",{className:"banner-movie",children:e.jsx(gs,{arrows:!0,infinite:!1,children:a.map(s=>e.jsx("div",{children:e.jsx("img",{src:s.hinhAnh,alt:"banner-cine-start",className:"banner-item"})},s.maBanner))})}),we=({children:a,variant:s,link:t,...n})=>e.jsx(M,{to:t,...n,className:`btn ${s}`,children:a}),V="/",Ce="/auth",Se="/ticket-booking",qe="/admin",le="/admin/user",Ve="/admin/movie",$e="/admin/cinema",ea="/admin/account",Oe="/seat-list",ze="/profile",sa=Se+"/:slug",aa=Oe+"/:slug",na={movieId:null,theaterId:null},_e=se({name:"bookingTicketPage",initialState:na,reducers:{showMovieDetail:(a,s)=>{console.log("🚀action.payload---->",s.payload),a.movieId=s.payload},showTheaterDetail:(a,s)=>{a.theaterId=s.payload}}}),{showMovieDetail:Qe,showTheaterDetail:ia}=_e.actions,ta=_e.reducer,Ye=({dataCardFilm:a})=>{const{currentUser:s}=E(d=>d.authenticUser),t=z(),n=d=>{s&&t(Qe(d))},o=Se+`/${a.maPhim}`;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-movie-box",children:[e.jsx("div",{children:e.jsx("a",{href:"",children:e.jsx("img",{className:"image",src:a.hinhAnh,alt:""})})}),e.jsxs("div",{className:"movie-info",children:[e.jsx("p",{className:"name",children:a.tenPhim}),e.jsxs("ul",{className:"detail",children:[e.jsx("li",{className:"title",children:e.jsxs("a",{href:"",className:"title-link",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"/img/icon-tag.svg",alt:""})}),a.dangChieu===!0?e.jsx("span",{className:"title-name",children:"Phim Sắp Chiếu"}):e.jsx("span",{className:"title-name",children:"Phim Đang Chiếu"})]})}),e.jsx("li",{className:"title",children:e.jsxs("a",{href:"",className:"title-link",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-clock.svg",alt:""})}),e.jsx("span",{className:"title-name",children:"120'"})]})})]})]})]}),e.jsxs("div",{className:"info",children:[e.jsx("a",{href:"",className:"movie-name",children:a.tenPhim.toUpperCase()}),e.jsxs("div",{className:"info-action",children:[e.jsxs("a",{href:a.trailer,className:"action-watch",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-play-vid.svg",alt:""})}),e.jsx(M,{to:a.trailer,children:e.jsx("span",{className:"txt",children:"Xem Trailer"})})]}),e.jsx(we,{variant:"btn--yellow",link:o,onClick:()=>n(a.maPhim),children:a.sapChieu===!0?e.jsx("span",{children:"Đặt Vé Ngay"}):e.jsx("span",{children:"Tìm Hiểu Thêm"})})]})]})]})},ra=()=>{const a=B(),s=()=>{a(`${V}#navigate-wrap`)};return e.jsx("div",{className:"header-top-actions",children:e.jsxs(we,{link:"#",onClick:s,variant:"btn--yellow",children:[e.jsx("img",{src:"../public/img/ic-ticket.svg",alt:"cine-start"}),e.jsx("span",{children:"Đặt vé ngay"})]})})},la=()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{span:8,className:"footer-info",children:e.jsxs("div",{className:"footer-info__account",children:[e.jsx("span",{className:"footer-title",children:"TÀI KHOẢN"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Đăng Nhập"})}),e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Đăng Ký"})})]})]})}),e.jsxs(g,{className:"footer-info__movie",children:[e.jsx("span",{className:"footer-title",children:"Xem Phim"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Phim Đang Chiếu"})}),e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Phim Sắp Chiếu"})})]})]}),e.jsxs(g,{span:8,className:"footer-theater",children:[e.jsx("span",{className:"footer-title",children:"HỆ THỐNG RẠP"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Cinestar Hai Bà Trưng (TP.HCM)"})}),e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Cinestar Sinh Viên (Bình Dương)"})}),e.jsx("li",{children:e.jsxs(M,{href:"",className:"link",children:["Cinestart Mỹ Tho"," "]})}),e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Cinestart Đà Lạt"})}),e.jsx("li",{children:e.jsx(M,{href:"",className:"link",children:"Cinestart Lâm Đồng"})})]})]})]}),oa=()=>e.jsxs("div",{className:"footer-social__list",children:[e.jsx(M,{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/footer-facebook.svg",alt:"facebook"})}),e.jsx(M,{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/footer-youtube.svg",alt:"youtube"})}),e.jsx(M,{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/ic-tittok.svg",alt:"tiktok"})}),e.jsx(M,{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/ic-zl-white.svg",alt:"zalo"})})]}),ca=()=>e.jsxs("div",{className:"footer-mobile",children:[e.jsx(g,{span:8,className:"footer-social",children:e.jsxs(A,{className:"footer-grow",style:{display:"block"},children:[e.jsx("a",{href:"#",children:e.jsx("img",{className:"footer-logo",src:"../../img/header-logo.webp",alt:""})}),e.jsx("p",{className:"text",children:"BE HAPPY, BE A START"}),e.jsx(oa,{})]})}),e.jsx(A,{className:"footer-grow",children:e.jsx(la,{})})]}),ha=()=>e.jsxs("div",{className:"footer-mobile__xs",children:[e.jsx("a",{href:"#",children:e.jsx("img",{className:"logo-footer",src:"../../img/header-logo.webp",alt:""})}),e.jsx("p",{className:"text",children:"BE HAPPY, BE A START"}),e.jsx("div",{className:"footer__list",children:e.jsxs("ul",{className:"footer__nav",children:[e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Tài Khoản"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Lịch Chiếu"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Thông Tin"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Về Chúng Tôi"})})]})})]}),da=()=>e.jsx("footer",{className:"footer",children:e.jsxs("div",{className:"container",children:[e.jsxs(A,{gutter:[100,100],className:"footer-grid",children:[e.jsx(g,{span:8,className:"footer-social",children:e.jsxs(A,{className:"footer-grow",children:[e.jsx("a",{href:"#",children:e.jsx("img",{className:"footer-logo",src:"../../img/header-logo.webp",alt:""})}),e.jsx("p",{className:"text",children:"BE HAPPY, BE A START"}),e.jsx(ra,{}),e.jsxs("div",{className:"footer-social__list",children:[e.jsx("a",{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/footer-facebook.svg",alt:"facebook"})}),e.jsx("a",{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/footer-youtube.svg",alt:"youtube"})}),e.jsx("a",{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/ic-tittok.svg",alt:"tiktok"})}),e.jsx("a",{className:"social-link",href:"",children:e.jsx("img",{src:"../../img/ic-zl-white.svg",alt:"zalo"})})]})]})}),e.jsxs(A,{className:"footer-grow",children:[e.jsx(g,{span:8,className:"footer-info",children:e.jsxs("div",{className:"footer-info-account",children:[e.jsx("span",{className:"footer-title",children:"TÀI KHOẢN"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Đăng Nhập"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Đăng Ký"})})]})]})}),e.jsxs(g,{className:"footer-info__movie",children:[e.jsx("span",{className:"footer-title",children:"Xem Phim"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Phim Đang Chiếu"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Phim Sắp Chiếu"})})]})]})]}),e.jsxs(g,{span:8,className:"footer-theater",children:[e.jsx("span",{className:"footer-title",children:"HỆ THỐNG RẠP"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Cinestar Hai Bà Trưng (TP.HCM)"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Cinestar Sinh Viên (Bình Dương)"})}),e.jsx("li",{children:e.jsxs("a",{href:"",className:"link",children:["Cinestart Mỹ Tho"," "]})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Cinestart Đà Lạt"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"link",children:"Cinestart Lâm Đồng"})})]})]})]}),e.jsx(ca,{}),e.jsx(ha,{})]})}),ue=5,Le=10,Pe=10,ma={KhachHang:"User",QuanTri:"Admin"},p={name:{required:"Tên không được để trống",minLength:`Tên tối thiểu ${ue} ký tự`,maxLength:`Tên tối đa ${Le} ký tự`},email:{required:"Email không được để trống",regex:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,errorRegex:"Vui Lòng Nhập Đúng Định Dạng Email"},phone:{required:"Số Điện Thoại không được để trống",regex:/(84|0[3|5|7|8|9])+([0-9]{8})\b/,errorRegex:"Vui Lòng Nhập Đúng Định Dạng Phone"},password:{required:"Mật khẩu không được để trống",regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,errorRegex:"Password tối thiễu 8 ký tự, 1 số, 1 ký tự in hoa và 1 ký tự in thường"},confirmPassword:{required:"Xác Nhận Mật Khẩu Không Được Để Trống",errorRegex:"Mật Khẩu không trùng khớp"}},ke="GP03",ua="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5Mb3AiOiJCb290Y2FtcCA2NiIsIkhldEhhblN0cmluZyI6IjI1LzEyLzIwMjQiLCJIZXRIYW5UaW1lIjoiMTczNTA4NDgwMDAwMCIsIm5iZiI6MTcwNTUxMDgwMCwiZXhwIjoxNzM1MjMyNDAwfQ.FrZqgp-B9SVwd6fnz8aY6uCneamGpnAdxPt96fXIUKw",xa="https://movienew.cybersoft.edu.vn/api",Me=(a,s)=>{localStorage.setItem(a,JSON.stringify(s))},xe=a=>{const s=localStorage.getItem(a);return s?JSON.parse(s):null},L=ms.create({baseURL:xa,headers:{"Content-Type":"application/json",TokenCyberSoft:ua}});L.interceptors.request.use(a=>{const s=xe("user");return a.headers={...a.headers,Authorization:s?`Bearer ${s.accessToken}`:""},a});const ga={login:async a=>{try{return(await L.post("/QuanLyNguoiDung/DangNhap",a)).data.content}catch(s){throw s.response.data.content}}},pa=xe("user"),ja={currentUser:pa},Be=se({name:"user",initialState:ja,reducers:{setUsers:(a,s)=>{a.currentUser=s.payload},removeUser:(a,s)=>{a.currentUser=s.payload}}}),{setUsers:Na,removeUser:Xe}=Be.actions,fa=Be.reducer,va={pathName:V},Je=se({name:"path-name",initialState:va,reducers:{changePathName:(a,s)=>{a.pathName=s.payload}}});Je.actions;const ya=Je.reducer,ba=ne({name:D().trim().required(p.name.required),password:D().trim().notRequired()}),Ta=()=>{const a=z(),s=B(),{control:t,handleSubmit:n,formState:{errors:o}}=ae({defaultValues:{name:"",password:""},resolver:ie(ba),criteriaMode:"all"}),[d,l]=ee.useState(!1),{mutate:c,isPending:f,error:j}=q({mutationFn:u=>ga.login(u),onSuccess:u=>{Me("user",u),a(Na(u)),R.success("Đăng Nhập Thành Công"),s(V)},onError:u=>{R.error(u||"Đăng Nhập Thất Bại")}}),i=u=>{const N={taiKhoan:u.name,matKhau:u.password};c(N)};return e.jsxs(te,{className:"form",onFinish:n(i),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"name",children:"Name"}),e.jsx(S,{name:"name",render:({field:u})=>e.jsx(H,{...u,size:"large",type:"text",status:o.name?"error":""}),control:t}),(o==null?void 0:o.name)&&e.jsx("p",{className:"text-danger",children:o.name.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"password",children:"Password"}),e.jsx(S,{name:"password",render:({field:u})=>e.jsx(H.Password,{...u,visibilityToggle:{visible:d,onVisibleChange:l},size:"large",className:"form-input",id:"password",type:"password",status:o.password?"error":""}),control:t}),(o==null?void 0:o.password)&&e.jsx("p",{className:"text-danger",children:o==null?void 0:o.password.message}),e.jsx(I,{htmlType:"submit",className:"btn btn-register",style:{marginTop:20},children:"ĐĂNG NHẬP"})]})]})},wa=()=>{const a=z(),s=B(),{currentUser:t}=E(i=>i.authenticUser),[n,o]=v.useState(!1),d=()=>{o(!0)},l=()=>{o(!1)},c=()=>{localStorage.clear(),a(Xe(null)),o(!1),R.success("Logout Thành Công")},f=()=>{o(!1),s(Ce)},j=[{key:"1",label:e.jsx("p",{onClick:c,children:"Đăng Xuất"})},{key:"2",label:e.jsx(M,{to:ze,children:e.jsx("p",{children:"Thông Tin Hồ Sơ"})})}];return e.jsxs("div",{className:"header-top-right",children:[e.jsx("div",{className:"header-top-search",children:e.jsx("div",{className:"header-search",children:e.jsx("img",{src:"../../../public/img/ic-header-search.svg",alt:"cine start"})})}),e.jsx("div",{className:"header-top-auth",children:e.jsx("div",{className:"header-auth-wrap",children:t===null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-ava",children:e.jsx("img",{src:"../../../public/img/ic-header-auth.svg",alt:""})}),e.jsxs("div",{className:"auth-text",children:[e.jsx(I,{onClick:d,children:"Đăng Nhập"}),e.jsxs(me,{footer:null,title:"ĐĂNG NHẬP",open:n,onCancel:l,children:[e.jsxs("p",{className:"modal-info",children:["BẠN CHƯA CÓ TÀI KHOẢN:"," ",e.jsx("span",{style:{color:"orange",cursor:"pointer"},onClick:f,children:"ĐĂNG KÝ NGAY"})]}),e.jsx(Ta,{})]})]})]}):e.jsx(Re,{menu:{items:j},className:"auth-ava",children:e.jsx("a",{onClick:i=>i.preventDefault(),children:e.jsxs(Ge,{children:[e.jsx("img",{src:"../../../public/img/ic-header-auth.svg",alt:""}),e.jsx("p",{className:"authentic-user",children:t.taiKhoan}),e.jsx(Ue,{})]})})})})}),e.jsx("div",{className:"header-mobile",children:e.jsxs("div",{className:"header-mobile-wrap",children:[e.jsx("a",{href:"",className:"main-logo",children:e.jsx("img",{src:"../../../public/img/header-logo.webp",alt:"cine start"})}),e.jsx("div",{className:"mobile-hamburger"})]})})]})},Ca={showNavbar:!1,showInputHeaderMobile:!1},Ze=se({name:"hamburger",initialState:Ca,reducers:{handleShowNavbar:(a,s)=>{a.showNavbar=!a.showNavbar},handleShowInputHeader:(a,s)=>{a.showInputHeaderMobile=!a.showInputHeaderMobile},handleCloseInput:(a,s)=>{console.log("🚀222---->",222),a.showInputHeaderMobile=!1}}}),{handleShowNavbar:Sa,handleShowInputHeader:Si,handleCloseInput:Li}=Ze.actions,La=Ze.reducer,Pa=()=>{E(s=>s.burger);const a=s=>{s.classList.contains("active")?s.classList.remove("active"):s.classList.add("active")};return v.useEffect(()=>{const s=document.querySelectorAll(".menu-nav .menu-item");Array.from(s).slice(1).forEach(n=>{n.addEventListener("click",()=>{a(n)})})},[]),e.jsx("div",{className:"mobile",children:e.jsx("div",{className:"container-mobile",children:e.jsxs("div",{className:"mobile-wrap",children:[e.jsx("div",{className:"mobile-navbar",children:e.jsx("nav",{className:"menu-nav",children:e.jsxs("ul",{className:"menu-list",children:[e.jsx("li",{className:"menu-item active",children:e.jsx(M,{to:V,className:"nav-link",children:"TRANG CHỦ"})}),e.jsx("li",{className:"menu-item",children:e.jsx("a",{href:"",className:"nav-link",children:"THÀNH VIÊN"})})]})})}),e.jsx("div",{className:"mobile-content",children:e.jsxs("ul",{className:"menu-list",children:[e.jsx("li",{className:"menu-item",children:e.jsx("a",{href:"",className:"nav-link",children:"Giới thiệu"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Thông tin"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Thành viên"})}),e.jsx("li",{children:e.jsx("a",{href:"",className:"nav-link",children:"Liên Hệ"})}),e.jsx("li",{children:e.jsxs("a",{href:"",className:"nav-link",children:["Social:",e.jsx("img",{src:"../../../img/footer-facebook.svg",alt:""}),e.jsx("img",{src:"../../../img/footer-youtube.svg",alt:""}),e.jsx("img",{src:"../../../img/ic-zl-white.svg",alt:""}),e.jsx("img",{src:"../../../img/ic-tittok.svg",alt:""})]})})]})})]})})})},ka=()=>{const a=z(),{showNavbar:s}=E(n=>n.burger),t=()=>{const n=document.querySelector(".mobile");!s&&n?n.classList.add("active"):s&&n.classList.remove("active"),a(Sa())};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"header",children:e.jsx("div",{className:"header-top",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header-top-wrap",children:[e.jsx(M,{to:V,className:"main-logo",children:e.jsx("img",{src:"../../../public/img/header-logo.webp",alt:"cine start"})}),e.jsx(wa,{})]}),e.jsx("div",{className:"header-mobile",children:e.jsxs("div",{className:"header-mobile-wrap",children:[e.jsx("a",{href:"",className:"main-logo",children:e.jsx("img",{src:"../../../public/img/header-logo.webp",alt:"cine start"})}),e.jsx("div",{className:"mobile-burger",style:{color:"red"},children:e.jsxs("div",{className:`burger ${s?"active":""}`,onClick:()=>t(),children:[e.jsx("span",{className:"line"}),e.jsx("span",{className:"line"}),e.jsx("span",{className:"line"})]})})]})})]})})}),e.jsx(Pa,{})]})},fe=({children:a})=>{const{pathname:s}=Ie(),t=z(),{currentUser:n}=E(u=>u.authenticUser),o=B(),[d,l]=v.useState(!1),{token:{colorBgContainer:c,borderRadiusLG:f}}=ps.useToken(),j=()=>{localStorage.clear(),t(Xe(null)),setIsModalOpen(!1),message.success("Logout Thành Công")},i=[{key:"1",label:e.jsx("p",{onClick:j,children:"Đăng Xuất"})}];return e.jsxs(De,{className:"h-screen",children:[e.jsxs(js,{trigger:null,collapsible:!0,collapsed:d,children:[e.jsx("div",{className:"demo-logo-vertical",style:{marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:"../../../public/img/header-logo.webp",width:120,height:60,alt:""})}),e.jsx(Ns,{theme:"dark",mode:"inline",defaultSelectedKeys:[s||le],onSelect:u=>{o(u.key)},items:[{key:le,icon:e.jsx(ks,{}),label:"User management"},{key:Ve,icon:e.jsx(Ms,{}),label:"Movie Management"},{key:$e,icon:e.jsx(Ds,{}),label:"Cinema Management"},{key:ea,icon:e.jsx(Hs,{}),label:"Account Settings"}]})]}),e.jsxs(De,{children:[e.jsxs(fs,{style:{background:c,display:"flex",justifyContent:"space-between"},children:[e.jsx(I,{type:"text",icon:d?e.jsx(Is,{}):e.jsx(Ks,{}),onClick:()=>l(!d),style:{fontSize:"16px",width:64,height:64}}),e.jsx(Re,{menu:{items:i},className:"auth-ava",children:e.jsx("a",{onClick:u=>u.preventDefault(),children:e.jsxs(Ge,{children:[e.jsx("img",{src:"../../../public/img/ic-header-auth.svg",alt:""}),e.jsx("p",{className:"authentic-user",children:n.taiKhoan}),e.jsx(Ue,{})]})})})]}),e.jsx(vs,{style:{margin:"24px 16px",padding:24,minHeight:280,background:c,borderRadius:f},children:a})]})]})},Ma=()=>e.jsx("div",{children:"CinemaManagement"}),We=()=>{const[a,s]=v.useState(!1);return{isOpen:a,openModal:()=>s(!0),closeModal:()=>s(!1)}},re={getListMovies:async a=>{const s={maNhom:ke,soTrang:a.page,soPhanTuTrenTrang:a.pageSize||Pe};try{return(await L.get("/QuanLyPhim/LayDanhSachPhimPhanTrang",{params:s})).data.content}catch(t){throw Error(t.response.data.content)}},addMovie:async a=>{var s;try{return(s=(await L.post("/QuanLyPhim/ThemPhimUpLoadHinh",a,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:s.content}catch(t){throw Error(t.response.data.content)}},deleteMovie:async a=>{try{return(await L.delete(`/QuanLyPhim/XoaPhim?MaPhim=${Number(a)}`)).data.content}catch(s){throw Error(s.response.data.content)}},editMovie:async a=>{try{return(await L.post("/QuanLyPhim/CapNhatPhimUpload",a,{headers:{"Content-Type":"multipart/form-data"}})).data.content}catch(s){console.log("🚀error---->",s)}}},Da=(a,s)=>O({queryKey:["list-movies",{currentPage:a}],queryFn:()=>re.getListMovies({page:a}),...s});U.extend(Fs);U.extend(Us);U.extend(qs);U.extend(Vs);U.extend($s);U.extend(Os);const Ha=ne({tenPhim:D().trim().required(p.name.required).min(ue,p.name.minLength),trailer:D().trim().required("Vui lòng nhập đường link trailer phim"),moTa:D().trim().required("Vui lòng nhập mô tả phim").min(20,"Mô tả tối thiểu 20 ký tự"),ngayKhoiChieu:D().trim().required("Vui lòng nhập ngày khỏi chiếu phim")}),Ia=({isOpen:a,onCloseModal:s,isPending:t,dataEdit:n,onSubmit:o})=>{const{handleSubmit:d,control:l,setValue:c,watch:f,reset:j,formState:{errors:i}}=ae({defaultValues:{tenPhim:"",trailer:"",moTa:"",trangThai:!1,hot:!1,danhGia:"",ngayKhoiChieu:"",hinhAnh:void 0},resolver:ie(Ha),criteriaMode:"all"}),u=f("hinhAnh"),N=f("trangThai"),x=h=>h&&h<U().endOf("day");return v.useEffect(()=>{n&&(c("maPhim",n.maPhim.toString()),c("tenPhim",n.tenPhim),c("trailer",n.tenPhim),c("moTa",n.moTa),c("trangThai",n.dangChieu),c("hot",n.hot),c("danhGia",n.danhGia.toString()),c("ngayKhoiChieu",n.ngayKhoiChieu?U(new Date(n.ngayKhoiChieu)).format("YYYY-MM-DD"):null))},[n,c]),v.useEffect(()=>{a||j()},[a]),e.jsx(me,{open:a,title:e.jsx(ye,{className:"text-2xl font-medium",children:"Add movie"}),centered:!0,onCancel:()=>s(),footer:!1,width:700,children:e.jsx(te,{className:" my-4 ",onFinish:d(o),children:e.jsxs(A,{gutter:[48,24],children:[e.jsxs(g,{span:24,children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Movie name"]}),e.jsx(S,{name:"tenPhim",control:l,render:({field:h})=>e.jsx(H,{...h,size:"large",placeholder:"Movie name",status:i.tenPhim?"error":""})}),(i==null?void 0:i.tenPhim)&&e.jsx("p",{className:"text-danger",children:i.tenPhim.message})]}),e.jsxs(g,{span:24,children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Trailer"]}),e.jsx(S,{name:"trailer",control:l,render:({field:h})=>e.jsx(H,{...h,size:"large",placeholder:"Trailer",className:"mt-1",status:i.trailer?"error":""})}),(i==null?void 0:i.trailer)&&e.jsx("p",{className:"text-danger",children:i.trailer.message})]}),e.jsxs(g,{span:24,children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Description"]}),e.jsx(S,{name:"moTa",control:l,render:({field:h})=>e.jsx(H.TextArea,{...h,rows:4,size:"large",placeholder:"Description",className:"mt-1",status:i.moTa?"error":""})}),(i==null?void 0:i.moTa)&&e.jsx("p",{className:"text-danger",children:i.moTa.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{className:"text-sm block",children:"Status"}),e.jsx(S,{name:"trangThai",control:l,render:({field:h})=>e.jsxs(Ne.Group,{...h,className:"mt-1",defaultValue:!1,children:[e.jsx(Ne,{value:!0,children:"Showing"}),e.jsx(Ne,{value:!1,children:"Coming soon"})]})})]}),e.jsx(g,{span:24,children:e.jsx(S,{control:l,name:"hot",render:({field:h})=>e.jsx(ys,{checked:h.value,...h,children:"Film hot"})})}),e.jsxs(g,{span:12,children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Rate"]}),e.jsx(S,{control:l,name:"danhGia",render:({field:h})=>e.jsx(H,{...h,size:"large",placeholder:"Rate",type:"number",className:"mt-1",max:10})})]}),e.jsxs(g,{span:12,children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Release date"]}),e.jsx(S,{name:"ngayKhoiChieu",control:l,render:({field:h})=>e.jsx(bs,{...h,size:"large",className:"mt-1 w-full",placeholder:"DD/MM/YYYY",format:"DD/MM/YYYY",status:i.ngayKhoiChieu?"error":"",disabledDate:N?void 0:x,value:h.value?U(h.value):null,onChange:C=>h.onChange(C?U(C).format("MM/DD/YYYY"):null)})}),(i==null?void 0:i.ngayKhoiChieu)&&e.jsx("p",{className:"text-danger",children:i.ngayKhoiChieu.message})]}),e.jsx(g,{span:24,children:e.jsx(S,{control:l,name:"hinhAnh",render:({field:{onChange:h,...C}})=>e.jsx(Ts,{...C,name:"avatar",listType:"picture-card",className:"avatar-uploader relative w-fit",showUploadList:!1,beforeUpload:()=>!1,onChange:b=>{h(b.file)},children:e.jsx("button",{style:{border:0,background:"none"},type:"button",children:u||n?e.jsxs("div",{children:[e.jsx("img",{style:{width:100,height:100,objectFit:"cover"},src:(n==null?void 0:n.hinhAnh)||URL.createObjectURL(new Blob([u]))}),e.jsx("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:b=>{b.stopPropagation(),c("hinhAnh",void 0)},children:e.jsx(Rs,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})}),e.jsxs(g,{span:24,className:"flex justify-end",children:[e.jsx(I,{size:"large",type:"default",children:"Cancel"}),e.jsx(I,{loading:t,disabled:t,htmlType:"submit",size:"large",type:"primary",className:"ml-3",children:n?"Edit movie":"Add movie"})]})]})})})},Ka=()=>{const[a,s]=v.useState(1),[t,n]=v.useState(void 0),{isOpen:o,openModal:d,closeModal:l}=We(),{data:c,isLoading:f,error:j}=Da(a),i=he(),{mutate:u,isPending:N}=q({mutationFn:m=>re.addMovie(m),onSuccess:m=>{i.invalidateQueries(),R.success("Thêm Phim Thành Công"),l()},onError:m=>{R.error("Thêm Phim Không Thành Công")}}),{mutate:x,isPending:h}=q({mutationFn:m=>re.deleteMovie(m),onSuccess:()=>{i.refetchQueries({queryKey:["list-movies",{currentPage:a}],type:"active"}),R.success("Xóa Phim Thành Công"),l()},onError:m=>{console.log("error",m)}}),{mutate:C,isPending:b}=q({mutationFn:m=>re.editMovie(m),onSuccess:m=>{i.refetchQueries({queryKey:["list-movies",{currentPage:a}],type:"active"}),R.success("Edit Thành Công"),l()},onError:m=>{R.error("Edit Không Thành Công")}}),T=[{title:"Movie name",key:"movie-name",dataIndex:"tenPhim",width:200},{title:"Image",key:"image",render:m=>e.jsx("img",{src:m.hinhAnh,alt:m.biDanh,style:{width:"100px",height:"120px",objectFit:"cover"}})},{title:"Description",key:"description",width:260,render:m=>e.jsx(ye.Paragraph,{ellipsis:{rows:2},className:"w-[200px]",children:m.moTa})},{title:"Show time",key:"show-time",dataIndex:"ngayKhoiChieu",width:200,render:m=>{const k=new Date(m);if(isNaN(k))console.error("Ngày giờ không hợp lệ");else{const J=zs(k,"MM/dd/yyyy hh:mm a");return e.jsx(ye,{children:J})}}},{title:"Rate",key:"rate",dataIndex:"danhGia",render:m=>e.jsx(ws,{disabled:!0,allowHalf:!0,value:(m||0)/2,count:5})},{title:"Hot",key:"hot",dataIndex:"hot",render:m=>m?e.jsx(_,{color:"red",children:"Hot 🔥 "}):e.jsx(_,{color:"green",children:"Normal"})},{title:"Showing",key:"dangChieu",dataIndex:"dangChieu",render:m=>m?e.jsx(_,{icon:e.jsx(As,{spin:!0}),color:"processing",children:"Showing"}):e.jsx(_,{children:"N/A"})},{title:"Coming soon",key:"sapChieu",dataIndex:"sapChieu",render:m=>m?e.jsx(_,{color:"success",icon:e.jsx(Es,{}),children:"Coming soon"}):e.jsx(_,{children:"N/A"})},{title:"Action",key:"action",width:200,render:m=>e.jsxs("div",{className:"flex",children:[e.jsx(I,{type:"primary",className:"mr-2",onClick:()=>{n(m),d()},children:"Edit"}),e.jsx(Fe,{title:"Delete the movie",description:"Are you sure to delete this movie?",onConfirm:()=>x(m.maPhim.toString()),onCancel:()=>{},placement:"bottom",okText:"Yes",cancelText:"No",children:e.jsx(I,{type:"primary",danger:!0,disabled:h,children:"Delete"})})]})}],P=(c==null?void 0:c.items)||[],G=(c==null?void 0:c.totalCount)||0,X=m=>{const k=new FormData;k.append("tenPhim",m.tenPhim),k.append("trailer",m.trailer),k.append("danhGia",m.danhGia),k.append("moTa",m.moTa),k.append("hinhAnh",m.hinhAnh),k.append("hot",m.hot.toString()),k.append("dangChieu",m.trangThai?"true":"false"),k.append("sapChieu",m.trangThai?"false":"true"),k.append("ngayKhoiChieu",m.ngayKhoiChieu),k.append("maNhom","GP03"),t?(k.append("maPhim",t.maPhim.toString()),C(k)):u(k)};return!f&&j?e.jsx("div",{children:"Something went wrong"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"movieManagement",children:[e.jsx(Ae,{separator:">",items:[{title:"Dashboard"},{title:"Movie Management",href:""}]}),e.jsx(I,{size:"large",type:"primary",onClick:()=>{d(),n(void 0)},children:"Add Movie"})]}),e.jsx("h3",{className:"heading",children:"List movies"}),e.jsx(Te,{rowKey:"maPhim",columns:T,dataSource:P,pagination:!1,loading:f}),e.jsx("div",{className:"pagination",children:e.jsx(Ee,{total:G,defaultCurrent:1,onChange:(m,k)=>{s(m)},showSizeChanger:!1})}),e.jsx(Ia,{dataEdit:t,isOpen:o,isPending:N||b,onCloseModal:l,onSubmit:X})]})},oe={getListUser:async a=>{try{const s={maNhom:ke,soTrang:a.page,soPhanTuTrenTrang:a.pageSize||Pe};return(await L.get("QuanLyNguoiDung/LayDanhSachNguoiDungPhanTrang",{params:s})).data.content}catch(s){throw Error(s.response.data.content)}},addUser:async a=>{try{return(await L.post("/QuanLyNguoiDung/ThemNguoiDung",a)).data.content}catch(s){console.log("🚀error---->",s)}},editUser:async a=>{try{const s=await L.post("/QuanLyNguoiDung/CapNhatThongTinNguoiDung",a);if(s.status===200)return s.data.content;console.log("🚀error---->",error)}catch(s){console.log("🚀error---->",s)}},deleteUser:async a=>{try{return(await L.delete(`/QuanLyNguoiDung/XoaNguoiDung?TaiKhoan=${a}`)).data.content}catch{R.error("NGƯỜI DÙNG ĐÃ ĐẶT VÉ NÊN KHÔNG THỂ XÓA")}}},Ra=ne({taiKhoan:D().trim().required(p.name.required).min(ue,p.name.minLength).max(Le,p.name.maxLength),email:D().trim().required(p.email.required).matches(p.email.regex,p.email.errorRegex),soDt:D().trim().required(p.phone.required).matches(p.phone.regex,p.phone.errorRegex),matKhau:D().trim().notRequired().required(p.password.required).matches(p.password.regex,p.password.errorRegex),maNhom:D().required("Vui Lòng Chọn Mã Nhóm"),maLoaiNguoiDung:D().required("Vui Lòng Chọn Mã Người Dùng")}),Ga=({isOpen:a,onCloseModal:s,dataEdit:t})=>{const n=he(),[o,d]=ee.useState(!1),{control:l,reset:c,handleSubmit:f,setValue:j,formState:{errors:i}}=ae({defaultValues:{taiKhoan:"",matKhau:"",email:"",soDt:"",maNhom:"",maLoaiNguoiDung:"",hoTen:""},resolver:ie(Ra),criteriaMode:"all"});v.useEffect(()=>{t&&(j("taiKhoan",t.taiKhoan),j("email",t.email),j("soDt",t.soDt),j("matKhau",t.matKhau),j("maNhom","GP03"),j("maLoaiNguoiDung",t.maLoaiNguoiDung))},[t]),v.useEffect(()=>{a||c()},[a]);const u=q({mutationFn:h=>oe.addUser(h),onSuccess:h=>{n.invalidateQueries(),R.success("Thêm User Thành Công")}}),N=q({mutationFn:h=>oe.editUser(h),onSuccess:h=>{n.invalidateQueries(),R.success("Edit thành công")}}),x=h=>{t?(N.mutate(h),s()):(u.mutate(h),s())};return e.jsx("div",{children:e.jsx(me,{footer:!1,open:a,onCancel:s,children:e.jsx(te,{layout:"vertical",onFinish:f(x),children:e.jsxs(A,{gutter:[48,16],children:[e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Tài Khoản"}),e.jsx(S,{name:"taiKhoan",control:l,render:({field:h})=>e.jsx(H,{...h,placeholder:"Vui Lòng Nhập Tài Khoản",type:"text",status:i.taiKhoan?"error":"",disabled:!!t})}),(i==null?void 0:i.taiKhoan)&&e.jsx("p",{className:"text-danger",children:i.taiKhoan.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Mật Khẩu"}),e.jsx(S,{name:"matKhau",control:l,render:({field:h})=>e.jsx(H.Password,{...h,visibilityToggle:{visible:o,onVisibleChange:d},placeholder:"Vui Lòng Nhập Tài Khoản",type:"password",status:i.matKhau?"error":""})}),(i==null?void 0:i.matKhau)&&e.jsx("p",{className:"text-danger",children:i.matKhau.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Email"}),e.jsx(S,{name:"email",control:l,render:({field:h})=>e.jsx(H,{...h,placeholder:"Vui Lòng Nhập Tài Khoản",status:i.email?"error":""})}),(i==null?void 0:i.email)&&e.jsx("p",{className:"",children:i.email.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Số Điện Thoại"}),e.jsx(S,{name:"soDt",control:l,render:({field:h})=>e.jsx(H,{...h,placeholder:"Vui Lòng Nhập Tài Khoản",status:i.soDt?"error":""})}),(i==null?void 0:i.soDt)&&e.jsx("p",{className:"",children:i.soDt.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Họ Tên"}),e.jsx(S,{name:"hoTen",control:l,render:({field:h})=>e.jsx(H,{...h,placeholder:"Vui Lòng Họ Và Tên"})})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Mã Nhóm"}),e.jsx(S,{name:"maNhom",control:l,render:({field:h})=>e.jsx(Y,{...h,status:i.maNhom?"error":"",showSearch:!0,style:{width:200},placeholder:"Search to Select",optionFilterProp:"label",filterSort:(C,b)=>((C==null?void 0:C.label)??"").toLowerCase().localeCompare(((b==null?void 0:b.label)??"").toLowerCase()),options:[{value:"GP00",label:"GP00"},{value:"GP01",label:"GP01"},{value:"GP02",label:"GP02"},{value:"GP03",label:"GP03"},{value:"GP04",label:"GP04"}]})}),(i==null?void 0:i.maNhom)&&e.jsx("p",{className:"",children:i.maNhom.message})]}),e.jsxs(g,{span:24,children:[e.jsx("label",{htmlFor:"",children:"Mã Loại Người Dùng"}),e.jsx(S,{name:"maLoaiNguoiDung",control:l,render:({field:h})=>e.jsx(Y,{...h,status:i.maLoaiNguoiDung?"error":"",showSearch:!0,style:{width:200},placeholder:"Search to Select",optionFilterProp:"label",filterSort:(C,b)=>((C==null?void 0:C.label)??"").toLowerCase().localeCompare(((b==null?void 0:b.label)??"").toLowerCase()),options:[{value:"QuanTri",label:"Quản Trị"},{value:"KhachHang",label:"Khách Hàng"}]})}),(i==null?void 0:i.maLoaiNguoiDung)&&e.jsx("p",{className:"",children:i.maLoaiNguoiDung.message})]}),e.jsxs(g,{span:24,children:[e.jsx(I,{onClick:()=>s(),children:"Cancel"}),e.jsx(I,{htmlType:"submit",children:t?"Edit User":"Add User"})]})]})})})})},Aa=()=>{const[a,s]=v.useState(1),{isOpen:t,openModal:n,closeModal:o}=We(),[d,l]=v.useState(void 0),[c,f]=v.useState(Pe),j=he(),{data:i,isLoading:u,error:N}=O({queryKey:["list-users",{currentPage:a,pageSize:c}],queryFn:()=>oe.getListUser({page:a,pageSize:c})}),{mutate:x,isPending:h}=q({mutationFn:P=>oe.deleteUser(P),onSuccess:()=>{j.refetchQueries({queryKey:["list-users",{currentPage:a}],type:"active"})},onError:P=>{console.log("error",P)}}),C=[{title:"Username",key:"user-name",dataIndex:"taiKhoan"},{title:"Full name",key:"full-name",dataIndex:"hoTen"},{title:"Email",key:"email",dataIndex:"email"},{title:"Phone number",key:"phone-number",dataIndex:"soDt"},{title:"Type User",key:"type-user",dataIndex:"maLoaiNguoiDung",render:(P,{maLoaiNguoiDung:G})=>e.jsx(_,{children:ma[G]||""})},{title:"Action",key:"action",render:P=>e.jsxs("div",{className:"flex",children:[e.jsx(I,{type:"primary",onClick:()=>{l(P),n()},children:"Edit"}),e.jsx(Fe,{title:"Delete user",description:"Are you sure to delete this user?",onConfirm:()=>x(P.taiKhoan.toString()),onCancel:()=>{},placement:"bottom",okText:"Yes",cancelText:"No",children:e.jsx(I,{type:"primary",danger:!0,disabled:h,children:"Delete"})})]})}],b=(i==null?void 0:i.items)||[],T=(i==null?void 0:i.totalCount)||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"userManagement",children:[e.jsx(Ae,{separator:">",items:[{title:"Dashboard"},{title:"User Management",href:""}]}),e.jsx(I,{size:"large",type:"primary",onClick:()=>{n(),l(void 0)},children:"Add User"})]}),e.jsx("h3",{className:"heading",children:"List User"}),e.jsx(Te,{rowKey:"taiKhoan",columns:C,dataSource:b,pagination:!1,loading:u}),e.jsx("div",{className:"pagination",children:e.jsx(Ee,{total:T,defaultCurrent:a,onChange:(P,G)=>{s(P)},showSizeChanger:!1})}),e.jsx(Ga,{dataEdit:d,isOpen:t,onCloseModal:o})]})},es=async a=>{try{return(await L.post("/QuanLyNguoiDung/DangKy",a)).data.content}catch(s){throw Error(s)}},Ea=ne({name:D().trim().required(p.name.required).min(ue,p.name.minLength).max(Le,p.name.maxLength),email:D().trim().required(p.email.required).matches(p.email.regex,p.email.errorRegex),phone:D().trim().required(p.phone.required).matches(p.phone.regex,p.phone.errorRegex),password:D().trim().notRequired().required(p.password.required).matches(p.password.regex,p.password.errorRegex),confirmPassword:D().trim().notRequired().required(p.confirmPassword.required).oneOf([cs("password"),null],"Xác Nhận Mật Khẩu Sai")}),Fa=()=>{const a=B(),{control:s,handleSubmit:t,formState:{errors:n}}=ae({defaultValues:{name:"",email:"",phone:"",password:"",confirmPassword:""},resolver:ie(Ea),criteriaMode:"all"}),[o,d]=ee.useState(!1),[l,c]=ee.useState(!1),f=q({mutationFn:i=>es(i),onSuccess:i=>{R.success("Đăng Ký Tài Khoản Thành Công"),a(V)},onError:i=>{R.error("Đăng Kỳ Thất Bại")}}),j=i=>{const{name:u,email:N,phone:x,password:h,confirmPassword:C}=i,b={taiKhoan:u,matKhau:h,email:N,soDt:x,maNhom:"GP03",hoTen:u};f.mutate(b)};return e.jsxs(te,{className:"form",onFinish:t(j),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"name",children:"Name"}),e.jsx(S,{name:"name",render:({field:i})=>e.jsx(H,{...i,size:"large",type:"text",status:n.name?"error":""}),control:s}),(n==null?void 0:n.name)&&e.jsx("p",{className:"text-danger",children:n.name.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"email",children:"Email"}),e.jsx(S,{name:"email",render:({field:i})=>e.jsx(H,{...i,size:"large",className:"form-input",id:"email",type:"text",status:n.email?"error":""}),control:s}),(n==null?void 0:n.email)&&e.jsx("p",{className:"text-danger",children:n.email.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"phone",children:"Phone"}),e.jsx(S,{name:"phone",render:({field:i})=>e.jsx(H,{...i,size:"large",className:"form-input",id:"phone",type:"text",status:n.phone?"error":""}),control:s}),(n==null?void 0:n.phone)&&e.jsx("p",{className:"text-danger",children:n.phone.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"password",children:"Password"}),e.jsx(S,{name:"password",render:({field:i})=>e.jsx(H.Password,{...i,visibilityToggle:{visible:o,onVisibleChange:d},size:"large",className:"form-input",id:"password",type:"password",status:n.password?"error":""}),control:s}),(n==null?void 0:n.password)&&e.jsx("p",{className:"text-danger",children:n==null?void 0:n.password.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(S,{name:"confirmPassword",control:s,render:({field:i})=>e.jsx(H.Password,{...i,visibilityToggle:{visible:l,onVisibleChange:c},size:"large",className:"form-input",id:"confirmPassword",type:"password",status:n.confirmPassword?"error":""})}),(n==null?void 0:n.confirmPassword)&&e.jsx("p",{className:"text-danger",children:n==null?void 0:n.confirmPassword.message})]}),e.jsx(I,{htmlType:"submit",className:"btn btn-register",children:"Đăng Ký"})]})},Ua=()=>e.jsx("div",{className:"register",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"register-modal",children:e.jsxs("div",{className:"register-modal-content",children:[e.jsx("img",{src:"../../../public/img/header-logo.webp",className:"register-logo",alt:""}),e.jsx("h2",{className:"register-title",children:"Đăng Ký Để Được Cập Nhật Các Chương Trình Khuyến Mãi Mới Nhất"}),e.jsx(Fa,{})]})})})}),ce={getListMovie:async()=>{try{return(await L.get(`/QuanLyPhim/LayDanhSachPhim?maNhom=${ke}`)).data.content}catch(a){console.log("🚀error---->",a)}},getScheduleMovieList:async a=>{try{return(await L.get(`/QuanLyRap/LayThongTinLichChieuPhim?MaPhim=${a}`)).data.content}catch(s){console.log("🚀error---->",s)}},getDetailMovie:async a=>{try{return(await L.get(`QuanLyPhim/LayThongTinPhim?MaPhim=${a}`)).data.content}catch(s){console.log("🚀error---->",s)}}},be=()=>e.jsx("div",{className:"loading",children:e.jsx(Cs,{})}),qa=({item:a,onChange:s,isActive:t})=>e.jsx("div",{className:`time ${t?"active":""}`,onClick:()=>{s(a)},children:e.jsx("p",{className:"time-month",children:Qs(a).format("DD/MM")})}),Va=a=>{let s=[];return a.forEach(t=>{t.cumRapChieu.forEach(n=>{n.lichChieuPhim.forEach(o=>{const{maLichChieu:d,maRap:l,tenRap:c,ngayChieuGioChieu:f,thoiLuong:j}=o,i=f.split("T")[0],u=f.split("T")[1],{tenCumRap:N,diaChi:x}=n;s.push({maLichChieu:d,maRap:l,tenRap:c,ngayChieu:i,gioChieu:u,thoiLuong:j,tenCumRap:N,diaChi:x})})})}),s},$a=()=>{E(T=>T.authenticUser);const{data:a,isLoading:s,error:t}=O({queryKey:["schedule-movie"],queryFn:()=>ce.getScheduleMovieList(u)}),[n,o]=v.useState([]),[d,l]=v.useState([]),[c,f]=v.useState(""),[j,i]=v.useState("");v.useEffect(()=>{if(a){const T=Va(a.heThongRapChieu);o(T);const P=[...new Set(T.map(G=>G.ngayChieu))];l(P),f(P[0])}},[a]);const{slug:u}=Ke(),{movieId:N}=E(T=>T.bookingTicket),{data:x,isLoading:h}=O({queryKey:["movie-detail",N],queryFn:()=>ce.getDetailMovie(u)});if(s)return e.jsx(be,{});if(!a)return e.jsx(Ss,{description:"KHÔNG CÓ DỮ LIỆU"});const C=n.filter(T=>T.ngayChieu===j),b="Inception là một kiệt tác của đạo diễn Christopher Nolan, mang đến một trải nghiệm điện ảnh đầy kích thích và sâu sắc. Với cốt truyện phức tạp xoay quanh việc xâm nhập vào giấc mơ, phim cuốn hút khán giả từ đầu đến cuối. Leonardo DiCaprio thể hiện xuất sắc vai Dom Cobb, một chuyên gia trộm giấc mơ, mang đến sự căng thẳng và cảm xúc mãnh liệt. Hiệu ứng hình ảnh và âm thanh đỉnh cao, cùng với âm nhạc của Hans Zimmer, tạo nên một không gian mơ ảo và đầy mê hoặc. Inception là một bộ phim không thể bỏ qua cho những ai yêu thích điện ảnh.";if(x)return e.jsx("div",{className:"bookingTicket main",children:e.jsx("div",{className:"bookingTicket-movie",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"movie-select",children:[e.jsxs(A,{children:[e.jsx(g,{span:12,children:e.jsx("div",{className:"movie-image",children:e.jsx("img",{src:x==null?void 0:x.hinhAnh,alt:""})})}),e.jsx(g,{span:12,children:e.jsxs(A,{gutter:[20,20],className:"movie-info",children:[e.jsx(g,{span:24,children:e.jsx("h1",{className:"heading",children:(x==null?void 0:x.tenPhim).toUpperCase()})}),e.jsx(g,{span:24,children:e.jsxs("ul",{className:"info-detail",children:[e.jsxs("li",{className:"info-item",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-tag.svg",alt:""})}),e.jsx("span",{className:"txt",children:"Hoạt Hình"})]}),e.jsxs("li",{className:"info-item",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-clock.svg",alt:""})}),e.jsx("span",{className:"txt",children:"182'"})]})]})}),e.jsx(g,{span:24,children:e.jsxs("div",{className:"detail",children:[e.jsx("span",{children:"MÔ TẢ"}),e.jsx("p",{className:"txt",children:"Đạo Diễn: Josh Gordon, Will Speck"}),e.jsx("p",{className:"txt",children:"Diễn Viên: Anthony Ramos, Naomi Scott, Kristofer Hivju"}),e.jsxs("p",{className:"txt",children:["Khởi Chiếu:",Ys(x==null?void 0:x.ngayKhoiChieu).format("DD/MM/YYYY")]}),e.jsxs("div",{className:"detail-content",children:[e.jsx("h2",{children:"NỘI DUNG PHIM"}),e.jsx("p",{className:"txt",children:`${(x==null?void 0:x.moTa.length)<50?b:x.moTa}}`})]}),e.jsx("div",{className:"info-action",children:e.jsxs("a",{href:x.trailer,className:"booking action-watch",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-play-vid.svg",alt:""})}),e.jsx(M,{to:x.trailer,children:e.jsx("span",{className:"text",children:"Xem Trailer"})})]})})]})})]})})]}),e.jsx(g,{span:24,children:e.jsxs("div",{className:"detail bookingTicket-mobile",children:[e.jsx("span",{children:"MÔ TẢ"}),e.jsx("p",{className:"txt",children:"Đạo Diễn: Josh Gordon, Will Speck"}),e.jsx("p",{className:"txt",children:"Diễn Viên: Anthony Ramos, Naomi Scott, Kristofer Hivju"}),e.jsxs("p",{className:"txt",children:["Khởi Chiếu: ",x==null?void 0:x.ngayKhoiChieu]}),e.jsxs("div",{className:"detail-content",children:[e.jsx("h2",{children:"NỘI DUNG PHIM"}),e.jsx("p",{className:"txt",children:`${(x==null?void 0:x.moTa.length)<50?b:x.moTa}}`})]}),e.jsx("div",{className:"info-action",children:e.jsxs("a",{href:"",className:"booking action-watch",children:[e.jsx("span",{className:"ic",children:e.jsx("img",{src:"../../../public/img/icon-play-vid.svg",alt:""})}),e.jsx("span",{className:"text",children:"Xem Trailer"})]})})]})})]}),n.length>0?e.jsxs("div",{className:"container-ticket",children:[e.jsxs("div",{className:"movie-schedule",children:[e.jsx("h2",{className:"heading",children:"LỊCH CHIẾU"}),e.jsx("div",{className:"schedule-list",children:d.map((T,P)=>e.jsx(qa,{item:T,isActive:T===j,onChange:G=>i(G)},T))})]}),e.jsxs("div",{className:"theater-list",children:[e.jsx("h2",{className:"heading",style:{textAlign:"center"},children:"DANH SÁCH RẠP"}),C.map((T,P)=>{const G=Oe+`/${T.maLichChieu}`;return e.jsxs("div",{className:"theater-info",children:[e.jsx("p",{className:"name",children:T.tenCumRap}),e.jsx("p",{className:"address",children:T.diaChi}),e.jsx(M,{className:"hour",to:G,children:T.gioChieu})]},P)})]})]}):e.jsx("p",{style:{color:"red",fontSize:"20px",marginTop:60,textAlign:"center"},children:"PHIM HIỆN TẠI CHƯA CÓ SUẤT CHIẾU"})]})})})},Oa=({showingMovieList:a})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"movie-heading",children:"PHIM ĐANG CHIẾU"}),e.jsx(Bs,{spaceBetween:30,slidesPerView:6,navigation:!0,pagination:{clickable:!0,dynamicBullets:!0},breakpoints:{320:{slidesPerView:2},500:{slidesPerView:3},768:{slidesPerView:3},1195:{slidesPerView:4}},modules:[Xs,Js],className:"mySwiper",children:e.jsx("div",{children:a.map((s,t)=>e.jsx("div",{children:e.jsx(Zs,{className:"movie-list",children:e.jsx("div",{className:"card-movie-item",children:e.jsx("div",{children:e.jsx(Ye,{dataCardFilm:s})})})},s.maPhim)},s.maPhim))})})]}),za=({comingSoon:a})=>e.jsxs("div",{className:"coming-soon",children:[e.jsx("h2",{className:"heading",children:"PHIM SẮP CHIẾU"}),e.jsx(A,{gutter:[16,32],className:"movie-list",children:a.map(s=>e.jsx(g,{span:8,className:"card-movie-item",children:e.jsx(Ye,{dataCardFilm:s})},s.maPhim))})]}),_a=()=>{const a=z(),s=v.useRef(null);Ie();const[t,n]=v.useState([]),[o,d]=v.useState([]),[l,c]=v.useState({movie:{value:"",label:"CHỌN PHIM"},theater:{value:"",label:"CHỌN RẠP"},date:{value:"",label:"CHỌN NGÀY"},showTime:{value:"",label:"SUẤT CHIẾU"}}),[f,j]=v.useState(!1),{data:i,isLoading:u}=O({queryKey:["movie-list"],queryFn:()=>ce.getListMovie()}),N=o.filter(r=>r.sapChieu===!1),x=o.filter(r=>r.sapChieu===!0),h=async()=>{try{const r=await L.get("/QuanLyPhim/LayDanhSachBanner");r.data.content.length>0&&n(r.data.content)}catch(r){console.log("🚀error---->",r)}},C=async()=>{try{const r=await L.get("/QuanLyPhim/LayDanhSachPhim?maNhom=GP03");r.data.content.length>0&&d(r.data.content)}catch(r){console.log("🚀error---->",r)}},b=async()=>{try{const r=await L.get("/QuanLyRap/LayThongTinLichChieuHeThongRap?maNhom=GP03");if(r.data.content.length>0){const{content:w}=r.data,F=w.filter(je=>je.maHeThongRap==="CGV")}}catch{}},{data:T,isLoading:P}=O({queryKey:["scheduleMovie-list",l.movie.value],queryFn:()=>ce.getScheduleMovieList(l.movie.value)}),G=i==null?void 0:i.map(r=>({value:r.maPhim,label:r.tenPhim.toUpperCase()})),{heThongRapChieu:X=[]}=T||{},m=X.map(r=>r?{value:r.maHeThongRap,label:r.tenHeThongRap}:{value:"",label:"Chưa Có Suất Chiếu"}),k=X.map(r=>r.cumRapChieu),Z=(r=>{const w=[];return r.forEach(F=>{F.forEach(je=>{je.lichChieuPhim.forEach(as=>{const{ngayChieuGioChieu:ns,maLichChieu:is}=as,[ts,rs]=ns.split("T");w.push({date:ts,time:rs,maLichChieu:is})})})}),w})(k),ge=Z.map(r=>({value:r.maLichChieu,label:r.date})),pe=Z.map(r=>({value:r.maLichChieu,label:r.time})),Q=(r,w)=>{c({...l,[r]:{...l,value:w,label:w}})},y=()=>{Object.values(l).every(r=>r.value!==null&&r.value!==void 0&&r.value!=="")&&j(!0)},K=()=>{a(Qe(l.movie.value)),a(ia(l.date.value))},$=Se+`/${l.movie.value}`;return v.useEffect(()=>{h(),C(),b(),y()},[l]),e.jsxs("div",{className:"main container",children:[e.jsx(Ws,{bannerList:t}),e.jsxs(A,{ref:s,id:"navigate-wrap-scroll",className:"navigate-wrap",children:[e.jsx(g,{className:"heading",children:e.jsx("h1",{className:"heading-title",children:"ĐẶT VÉ NHANH"})}),e.jsx("div",{children:e.jsxs(A,{className:"navigate-filter",gutter:[24,24],children:[e.jsx(g,{className:"navigate-filter-item",children:e.jsx(Y,{showSearch:!0,optionFilterProp:"label",filterSort:(r,w)=>((r==null?void 0:r.label)??"").toLowerCase().localeCompare(((w==null?void 0:w.label)??"").toLowerCase()),options:G,onChange:r=>Q("movie",r),value:l.movie.label})}),e.jsx(g,{className:"navigate-filter-item",children:e.jsx(Y,{showSearch:!0,optionFilterProp:"label",filterSort:(r,w)=>((r==null?void 0:r.label)??"").toLowerCase().localeCompare(((w==null?void 0:w.label)??"").toLowerCase()),disabled:l.movie.label==="CHỌN PHIM",onChange:r=>Q("theater",r),value:l.theater.label,options:m,notFoundContent:"Phim Chưa Có "})}),e.jsx(g,{className:"navigate-filter-item",children:e.jsx(Ls,{renderEmpty:()=>"Phim Chưa Có Suất Chiếu",children:e.jsx(Y,{showSearch:!0,optionFilterProp:"label",filterSort:(r,w)=>((r==null?void 0:r.label)??"").toLowerCase().localeCompare(((w==null?void 0:w.label)??"").toLowerCase()),value:l.date.label,options:ge,disabled:l.theater.label==="CHỌN RẠP",onChange:r=>Q("date",r)})})}),e.jsx(g,{className:"navigate-filter-item",children:e.jsx(Y,{showSearch:!0,placeholder:"CHỌN SUẤT",optionFilterProp:"label",options:pe,filterSort:(r,w)=>((r==null?void 0:r.label)??"").toLowerCase().localeCompare(((w==null?void 0:w.label)??"").toLowerCase()),onChange:r=>Q("showTime",r),value:l.showTime.label,disabled:l.date.label==="CHỌN NGÀY"})}),e.jsx(g,{className:"navigate-filter-btn",children:e.jsxs(we,{class:`${f?"navigate-filter":""} btn`,onClick:()=>K(),to:f?$:"",children:[e.jsx("img",{src:"../public/img/ic-ticket.svg",alt:"cine-start"}),e.jsx("span",{children:"Đặt vé ngay"})]})})]})})]}),e.jsx(Oa,{showingMovieList:x}),e.jsx(za,{comingSoon:N})]})},Qa={getInfoUser:async(a,s)=>{try{return(await L.get(`/QuanLyNguoiDung/LayDanhSachNguoiDung?MaNhom=${a}&tuKhoa=${s}`)).data.content}catch(t){throw Error(t.response.data.content)}}},Ya={editUser:async a=>{try{const s=await L.put("/QuanLyNguoiDung/CapNhatThongTinNguoiDung",a);if(s.status===200)return s.data.content;console.log("🚀error---->",error)}catch(s){console.log("🚀error---->",s)}}},Ba=ne({email:D().trim().required(p.email.required).matches(p.email.regex,p.email.errorRegex),phone:D().trim().required(p.phone.required).matches(p.phone.regex,p.phone.errorRegex),password:D().trim().notRequired().required(p.password.required).matches(p.password.regex,p.password.errorRegex)}),Xa=()=>{const{currentUser:a}=E(N=>N.authenticUser),{data:s,isLoading:t}=O({queryKey:["infoUser"],queryFn:()=>Qa.getInfoUser(a.maNhom,a.hoTen)});he();const{control:n,handleSubmit:o,register:d,setValue:l,formState:{errors:c}}=ae({defaultValues:{name:(s==null?void 0:s.taiKhoan)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.soDT)||"",password:(s==null?void 0:s.password)||""},resolver:ie(Ba),criteriaMode:"all"}),[f,j]=ee.useState(!1);q({mutationFn:N=>es(N)});const i=q({mutationFn:N=>Ya.editUser(N),onSuccess:N=>{R.success("Edit thành công")},onError:N=>{R.error("")}}),u=N=>{const{name:x,email:h,phone:C,password:b}=N,T={taiKhoan:x,matKhau:b,email:h,soDt:C,maNhom:"GP03",hoTen:x,maLoaiNguoidung:"KhachHang"};i.mutate(T)};return v.useEffect(()=>{s&&(console.log(s[0]),l("name",s[0].taiKhoan),l("email",s[0].email),l("phone",s[0].soDT),l("password",s[0].matKhau))},[s,l]),e.jsxs(te,{className:"form",style:{paddingTop:"20px",paddingBottom:"20px"},onFinish:o(u),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"name",children:"Name"}),e.jsx(S,{name:"name",render:({field:N})=>e.jsx(H,{...N,size:"large",type:"text",status:c.name?"error":"",disabled:!0}),control:n}),(c==null?void 0:c.name)&&e.jsx("p",{className:"text-danger",children:c.name.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"email",children:"Email"}),e.jsx(S,{name:"email",render:({field:N})=>e.jsx(H,{...N,size:"large",className:"form-input",id:"email",type:"text",status:c.email?"error":""}),control:n}),(c==null?void 0:c.email)&&e.jsx("p",{className:"text-danger",children:c.email.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"phone",children:"Phone"}),e.jsx(S,{name:"phone",render:({field:N})=>e.jsx(H,{...N,size:"large",className:"form-input",id:"phone",type:"text",status:c.phone?"error":""}),control:n}),(c==null?void 0:c.phone)&&e.jsx("p",{className:"text-danger",children:c.phone.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label ",htmlFor:"password",children:"Password"}),e.jsx(S,{name:"password",render:({field:N})=>e.jsx(H.Password,{...N,visibilityToggle:{visible:f,onVisibleChange:j},size:"large",className:"form-input",id:"password",type:"password",status:c.password?"error":""}),control:n}),(c==null?void 0:c.password)&&e.jsx("p",{className:"text-danger",children:c==null?void 0:c.password.message})]}),e.jsx(I,{htmlType:"submit",style:{marginTop:"15px"},children:"CẬP NHẬT"})]})},Ja=()=>{const a=xe("seatList");if(!a)return e.jsx("p",{children:"Không Có Dữ Liệu"});const{data:s}=a,t=s.filter(o=>o.daDat===!0),n=[{title:"Vị Trí Ghế",key:"position-seat",dataIndex:"tenGhe"},{title:"Gía Vé",key:"price-ticket",dataIndex:"giaVe"},{title:"Loại Ghế",key:"type-ticket",dataIndex:"loaiGhe"}];return e.jsx("div",{className:" container",children:e.jsx(Te,{columns:n,dataSource:t,pagination:!1})})},Za=()=>{const a=t=>{console.log(t)},s=[{key:"1",label:"THÔNG TIN TÀI KHOẢN",children:e.jsx(Xa,{})},{key:"2",label:"LỊCH SỬ ĐẶT VÉ",children:e.jsx(Ja,{})}];return e.jsx("div",{style:{backgroundColor:"gray"},className:"main container",children:e.jsxs("div",{className:"profilePage",children:[e.jsx("h2",{className:"heading",children:"THÔNG TIN TÀI KHOẢN"}),e.jsx(Ps,{defaultActiveKey:"1",items:s,onChange:a})]})})},Wa={getTheaterInfo:async a=>{try{return(await L.get(`/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${a}`)).data.content}catch(s){console.log("🚀error---->",s)}},getTheaterList:async()=>{try{return(await L.get("/QuanLyRap/LayThongTinHeThongRap")).data.content}catch(a){console.log("🚀error---->",a)}}},en={infoTotalSeatList:[],seatList:[],isInitialLoad:!0,currentApiKey:null},ss=se({name:"booking-room",initialState:en,reducers:{getDetailSeat:(a,s)=>{const t=a.seatList.findIndex(n=>n.maGhe===s.payload.maGhe);t!==-1?a.seatList.splice(t,1):t===-1&&a.seatList.push(s.payload)},resetState:(a,s)=>{s.payload==="RESET-STATE"&&(a.seatList=[])},updateNewSeatList:(a,s)=>{a.seatList=s.payload},initialSeatList:(a,s)=>{a.infoTotalSeatList=s.payload.data,a.currentApiKey=s.payload.apiKey,a.isInitialLoad=!1},finalBooking:(a,s)=>{a.infoTotalSeatList=s.payload.data,Me("seatList",{apiKey:a.currentApiKey,data:s.payload.data})},loadFromLocalStorage:(a,s)=>{a.infoTotalSeatList=s.payload.data,a.currentApiKey=s.payload.apiKey,a.isInitialLoad=!1}}}),{getDetailSeat:sn,updateNewSeatList:Pi,initialSeatList:an,finalBooking:nn,resetState:tn,loadFromLocalStorage:rn}=ss.actions,ln=ss.reducer,on=({handleBookSeat:a,seat:s,row:t,active:n,booking:o})=>e.jsx("div",{onClick:()=>a(t.label,s.tenGhe),className:`seat ${s.loaiGhe==="Thuong"?"":"vip"}
        ${s.daDat===!0?"booked":""}
      ${o.includes(s.tenGhe)?"booking":""}
      `,children:s.tenGhe}),cn=({nameMovie:a,nameTheater:s,numberTheater:t,slug:n})=>{const o=B(),{seatList:d,infoTotalSeatList:l,currentApiKey:c}=E(y=>y.bookingRoom),{currentUser:f}=E(y=>y.authenticUser),j=z(),[i,u]=v.useState(!1),[N,x]=v.useState(!0),[h,C]=v.useState([]),[b,T]=v.useState(!1);v.useEffect(()=>{const y=xe("seatList");return y&&y.apiKey===n&&j(rn({apiKey:y.apiKey,data:y.data})),x(!1),()=>{j(tn("RESET-STATE"))}},[j,n]),v.useEffect(()=>{f===null&&!b&&(R.error("BẠN CHƯA CÓ TÀI KHOẢN, VUI LÒNG ĐĂNG NHẬP"),T(!0))},[f,b]);const P=()=>{R.success("ĐẶT VÉ THÀNH CÔNG"),u(!1),setTimeout(()=>{o(V)},1e3);const y=l.map(K=>{const $=d.find(r=>K.maGhe===r.maGhe);return $?{...$,daDat:!0}:K});j(nn({data:y})),Me("seatList",{apiKey:n,data:y})},G=()=>{u(!1)};if(!Array.isArray(l)||N)return null;const m=(y=>{const K=[],$="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(let r=0;r<y.length;r+=16){const w=y.slice(r,r+16),F=$[Math.floor(r/16)];K.push({label:F,seats:w})}return K})(l),J=d.map(y=>`${y.row}-${y.tenGhe}`).join(" | "),Z=d.reduce((y,K)=>y+K.giaVe,0),ge=d.map(y=>y.tenGhe),pe=(y,K)=>{const $=m.findIndex(F=>F.label===y),w={...m[$].seats.find(F=>F.tenGhe===K),row:y};j(sn(w)),ge.includes(K)?C(h.filter(F=>F!==K)):C([...h,K])},Q=()=>{u(!0)};return f===null?e.jsx(de,{to:Ce}):e.jsxs(e.Fragment,{children:[m.map(y=>e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"row-label",children:y.label}),y.seats.map(K=>e.jsx("div",{className:"row-seat",children:e.jsx(on,{handleBookSeat:pe,seat:K,row:y,booking:h})},K.maGhe))]},y.label)),e.jsxs("div",{className:"type-seat",children:[e.jsxs("div",{className:"booked",children:[e.jsx("p",{}),e.jsx("span",{children:"GHẾ ĐÃ ĐƯỢC CHỌN"})]}),e.jsxs("div",{className:"booking",children:[e.jsx("p",{}),e.jsx("span",{children:"GHẾ ĐANG CHỌN"})]}),e.jsxs("div",{className:"vip",children:[e.jsx("p",{}),e.jsx("span",{children:"GHẾ VIP"})]}),e.jsxs("div",{className:"normal",children:[e.jsx("p",{}),e.jsx("span",{children:"GHẾ THƯỜNG"})]})]}),e.jsx("div",{className:"bill",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"bill-wrapper",children:[e.jsxs("div",{className:"bill-left",children:[e.jsx("h4",{className:"name-film",children:a.toUpperCase()}),e.jsxs("ul",{className:"list",children:[e.jsxs("li",{className:"item",children:[e.jsx("span",{className:"txt",children:s}),e.jsx("span",{className:"dot",children:" | "})]}),e.jsx("li",{className:"item"}),e.jsxs("li",{className:"item",children:[e.jsxs("span",{className:"txt",children:[`${t}`,":"]}),e.jsx("span",{className:"txt"}),e.jsx("span",{className:"dot",children:"|"}),e.jsx("span",{className:"txt",children:J})]})]})]}),e.jsx("div",{className:"bill-custom-right",children:e.jsxs("div",{className:"bill-right",children:[e.jsxs("div",{className:"price",children:[e.jsx("span",{className:"txt",children:"Tạm Tính: "}),e.jsx("span",{className:"num",children:Z.toLocaleString()})]}),e.jsx("div",{className:"bill-button",children:e.jsxs(I,{variant:"btn--primary",onClick:Q,children:[e.jsx("img",{src:"../public/img/ic-ticket.svg",alt:"cine-start"}),e.jsx("span",{children:"Đặt vé ngay"})]})})]})})]})})}),e.jsxs(me,{title:"XÁC NHẬN THÔNG TIN ĐẶT VÉ",open:i,onCancel:G,footer:!1,children:[e.jsxs("p",{className:"price",children:["Tổng Tiền: ",`${Z.toLocaleString()} VNĐ`]}),e.jsxs("div",{className:"info-film",children:[e.jsx("h3",{children:"Thông Tin Bộ Phim"}),e.jsx("p",{children:`${a}`}),e.jsx("p",{children:`${s}`}),e.jsx("p",{children:`${t}`})]}),e.jsxs("div",{className:"dataSeat",children:["Số ghế ngồi: ",J]}),e.jsxs("div",{className:"info-user",children:[e.jsx("h3",{children:"Thông Tin Người Đặt"}),e.jsx("p",{children:f.email}),e.jsx("p",{children:f.hoTen}),e.jsx("p",{children:f.soDT})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(I,{onClick:P,children:" Xác Nhận"}),e.jsx(I,{onClick:G,style:{marginLeft:"15px"},children:"Hủy Bỏ"})]})]})]})},hn=()=>{const{slug:a}=Ke(),{data:s,isLoading:t}=O({queryKey:["theater-detail",a],queryFn:()=>Wa.getTheaterInfo(a)}),n=z();if(v.useEffect(()=>{if(s){const{danhSachGhe:i}=s;i&&n(an({apiKey:a,data:i}))}},[s,n,a]),t)return e.jsx(be,{});const{thongTinPhim:o}=s,{diaChi:d,lichChieu:l,tenCumRap:c,tenRap:f,tenPhim:j}=o;return e.jsx("div",{className:"container main",style:{position:"relative"},children:e.jsxs("div",{className:"seat-list",children:[e.jsx("h2",{className:"heading",children:"CHỌN GHẾ -"}),e.jsxs("div",{className:"seat-screen",children:[e.jsx("img",{src:"../../../public/img/img-screen.png",alt:""}),e.jsx("p",{children:"Màn Hình"})]}),t&&e.jsx(be,{}),e.jsx(cn,{nameMovie:j,nameTheater:c,numberTheater:f,address:d,slug:a})]})})},He=()=>{const{currentUser:a}=E(s=>s.authenticUser);return a===null?e.jsx(ve,{}):a.maLoaiNguoiDung==="QuanTri"?e.jsx(de,{to:qe}):e.jsx(ve,{})},dn=()=>{const{currentUser:a}=E(s=>s.authenticUser);return a&&a.maLoaiNguoiDung==="QuanTri"?e.jsx(ve,{}):e.jsx(de,{to:V})},mn=()=>xs([{path:qe,element:e.jsx(dn,{}),children:[{index:!0,element:e.jsx(de,{to:le})},{path:le,element:e.jsx(fe,{children:e.jsx(Aa,{})})},{path:Ve,element:e.jsx(fe,{children:e.jsx(Ka,{})})},{path:$e,element:e.jsxs(fe,{children:[e.jsx(Ma,{}),","]})}]},{path:ze,element:e.jsx(W,{children:e.jsx(Za,{})})},{path:V,element:e.jsx(He,{}),children:[{index:!0,element:e.jsx(W,{children:e.jsx(_a,{})})}]},{path:Ce,element:e.jsx(He,{}),children:[{index:!0,element:e.jsxs(W,{children:[e.jsx(Ua,{}),","]})}]},{path:sa,element:e.jsxs(W,{children:[e.jsx($a,{}),","]})},{path:aa,element:e.jsx(W,{children:e.jsx(hn,{})})}]),W=({children:a})=>e.jsxs(e.Fragment,{children:[e.jsx(ka,{}),a,e.jsx(da,{})]});function un(){const a=mn();return e.jsx(e.Fragment,{children:a})}const xn=os({reducer:{burger:La,bookingTicket:ta,authenticUser:fa,pathNameLogin:ya,bookingRoom:ln}}),gn=new hs({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});ls.createRoot(document.getElementById("root")).render(e.jsx(_s,{children:e.jsx(us,{store:xn,children:e.jsx(ds,{client:gn,children:e.jsx(un,{})})})}));
