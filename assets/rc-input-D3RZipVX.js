import{c as x}from"./classnames-BK5ccKcQ.js";import{a as f,r as m}from"./react-CG4nFigO.js";import{f as ge,b as w,j as fe,h as _,k as he,g as de,i as Se}from"./@babel-BqpdSp3b.js";import{B as Ce,y as we}from"./rc-util-DVFD5dlp.js";function Ne(e){return!!(e.addonBefore||e.addonAfter)}function be(e){return!!(e.prefix||e.suffix||e.allowClear)}function ve(e,t,i){var o=t.cloneNode(!0),r=Object.create(e,{target:{value:o},currentTarget:{value:o}});return o.value=i,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(o.selectionStart=t.selectionStart,o.selectionEnd=t.selectionEnd),o.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},r}function me(e,t,i,o){if(i){var r=t;if(t.type==="click"){r=ve(t,e,""),i(r);return}if(e.type!=="file"&&o!==void 0){r=ve(t,e,o),i(r);return}i(r)}}function Re(e,t){if(e){e.focus(t);var i=t||{},o=i.cursor;if(o){var r=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var pe=f.forwardRef(function(e,t){var i,o,r=e.inputElement,E=e.children,g=e.prefixCls,k=e.prefix,R=e.suffix,N=e.addonBefore,p=e.addonAfter,ne=e.className,te=e.style,D=e.disabled,M=e.readOnly,ae=e.focused,W=e.triggerFocus,h=e.allowClear,z=e.value,oe=e.handleReset,b=e.hidden,c=e.classes,a=e.classNames,F=e.dataAttrs,y=e.styles,v=e.components,$=E??r,re=(v==null?void 0:v.affixWrapper)||"span",P=(v==null?void 0:v.groupWrapper)||"span",T=(v==null?void 0:v.wrapper)||"span",u=(v==null?void 0:v.groupAddon)||"span",G=m.useRef(null),H=function(Q){var U;(U=G.current)!==null&&U!==void 0&&U.contains(Q.target)&&(W==null||W())},Y=be(e),S=m.cloneElement($,{value:z,className:x($.props.className,!Y&&(a==null?void 0:a.variant))||null}),O=m.useRef(null);if(f.useImperativeHandle(t,function(){return{nativeElement:O.current||G.current}}),Y){var C,j=null;if(h){var K,Z=!D&&!M&&z,A="".concat(g,"-clear-icon"),le=ge(h)==="object"&&h!==null&&h!==void 0&&h.clearIcon?h.clearIcon:"âœ–";j=f.createElement("span",{onClick:oe,onMouseDown:function(Q){return Q.preventDefault()},className:x(A,(K={},w(K,"".concat(A,"-hidden"),!Z),w(K,"".concat(A,"-has-suffix"),!!R),K)),role:"button",tabIndex:-1},le)}var s="".concat(g,"-affix-wrapper"),B=x(s,(C={},w(C,"".concat(g,"-disabled"),D),w(C,"".concat(s,"-disabled"),D),w(C,"".concat(s,"-focused"),ae),w(C,"".concat(s,"-readonly"),M),w(C,"".concat(s,"-input-with-clear-btn"),R&&h&&z),C),c==null?void 0:c.affixWrapper,a==null?void 0:a.affixWrapper,a==null?void 0:a.variant),V=(R||h)&&f.createElement("span",{className:x("".concat(g,"-suffix"),a==null?void 0:a.suffix),style:y==null?void 0:y.suffix},j,R);S=f.createElement(re,fe({className:B,style:y==null?void 0:y.affixWrapper,onClick:H},F==null?void 0:F.affixWrapper,{ref:G}),k&&f.createElement("span",{className:x("".concat(g,"-prefix"),a==null?void 0:a.prefix),style:y==null?void 0:y.prefix},k),S,V)}if(Ne(e)){var q="".concat(g,"-group"),J="".concat(q,"-addon"),ee="".concat(q,"-wrapper"),ie=x("".concat(g,"-wrapper"),q,c==null?void 0:c.wrapper,a==null?void 0:a.wrapper),ue=x(ee,w({},"".concat(ee,"-disabled"),D),c==null?void 0:c.group,a==null?void 0:a.groupWrapper);S=f.createElement(P,{className:ue,ref:O},f.createElement(T,{className:ie},N&&f.createElement(u,{className:J},N),S,p&&f.createElement(u,{className:J},p)))}return f.cloneElement(S,{className:x((i=S.props)===null||i===void 0?void 0:i.className,ne)||null,style:_(_({},(o=S.props)===null||o===void 0?void 0:o.style),te),hidden:b})}),Fe=["show"];function Ae(e,t){return m.useMemo(function(){var i={};t&&(i.show=ge(t)==="object"&&t.formatter?t.formatter:!!t),i=_(_({},i),e);var o=i,r=o.show,E=he(o,Fe);return _(_({},E),{},{show:!!r,showFormatter:typeof r=="function"?r:void 0,strategy:E.strategy||function(g){return g.length}})},[e,t])}var Be=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Me=m.forwardRef(function(e,t){var i=e.autoComplete,o=e.onChange,r=e.onFocus,E=e.onBlur,g=e.onPressEnter,k=e.onKeyDown,R=e.prefixCls,N=R===void 0?"rc-input":R,p=e.disabled,ne=e.htmlSize,te=e.className,D=e.maxLength,M=e.suffix,ae=e.showCount,W=e.count,h=e.type,z=h===void 0?"text":h,oe=e.classes,b=e.classNames,c=e.styles,a=e.onCompositionStart,F=e.onCompositionEnd,y=he(e,Be),v=m.useState(!1),$=de(v,2),re=$[0],P=$[1],T=m.useRef(!1),u=m.useRef(null),G=m.useRef(null),H=function(n){u.current&&Re(u.current,n)},Y=Ce(e.defaultValue,{value:e.value}),S=de(Y,2),O=S[0],C=S[1],j=O==null?"":String(O),K=m.useState(null),Z=de(K,2),A=Z[0],le=Z[1],s=Ae(W,ae),B=s.max||D,V=s.strategy(j),q=!!B&&V>B;m.useImperativeHandle(t,function(){var l;return{focus:H,blur:function(){var d;(d=u.current)===null||d===void 0||d.blur()},setSelectionRange:function(d,X,L){var I;(I=u.current)===null||I===void 0||I.setSelectionRange(d,X,L)},select:function(){var d;(d=u.current)===null||d===void 0||d.select()},input:u.current,nativeElement:((l=G.current)===null||l===void 0?void 0:l.nativeElement)||u.current}}),m.useEffect(function(){P(function(l){return l&&p?!1:l})},[p]);var J=function(n,d,X){var L=d;if(!T.current&&s.exceedFormatter&&s.max&&s.strategy(d)>s.max){if(L=s.exceedFormatter(d,{max:s.max}),d!==L){var I,ce;le([((I=u.current)===null||I===void 0?void 0:I.selectionStart)||0,((ce=u.current)===null||ce===void 0?void 0:ce.selectionEnd)||0])}}else if(X.source==="compositionEnd")return;C(L),u.current&&me(u.current,n,o,L)};m.useEffect(function(){if(A){var l;(l=u.current)===null||l===void 0||l.setSelectionRange.apply(l,Se(A))}},[A]);var ee=function(n){J(n,n.target.value,{source:"change"})},ie=function(n){T.current=!1,J(n,n.currentTarget.value,{source:"compositionEnd"}),F==null||F(n)},ue=function(n){g&&n.key==="Enter"&&g(n),k==null||k(n)},se=function(n){P(!0),r==null||r(n)},Q=function(n){P(!1),E==null||E(n)},U=function(n){C(""),H(),u.current&&me(u.current,n,o)},ye=q&&"".concat(N,"-out-of-range"),xe=function(){var n=we(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return f.createElement("input",fe({autoComplete:i},n,{onChange:ee,onFocus:se,onBlur:Q,onKeyDown:ue,className:x(N,w({},"".concat(N,"-disabled"),p),b==null?void 0:b.input),style:c==null?void 0:c.input,ref:u,size:ne,type:z,onCompositionStart:function(X){T.current=!0,a==null||a(X)},onCompositionEnd:ie}))},Ee=function(){var n=Number(B)>0;if(M||s.show){var d=s.showFormatter?s.showFormatter({value:j,count:V,maxLength:B}):"".concat(V).concat(n?" / ".concat(B):"");return f.createElement(f.Fragment,null,s.show&&f.createElement("span",{className:x("".concat(N,"-show-count-suffix"),w({},"".concat(N,"-show-count-has-suffix"),!!M),b==null?void 0:b.count),style:_({},c==null?void 0:c.count)},d),M)}return null};return f.createElement(pe,fe({},y,{prefixCls:N,className:x(te,ye),handleReset:U,value:j,focused:re,triggerFocus:H,suffix:Ee(),disabled:p,classes:oe,classNames:b,styles:c}),xe())});export{pe as B,Me as I,me as r,Ae as u};
